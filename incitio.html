<!DOCTYPE html>
<html lang="en">
<!--   

Incityo

1 Sep 24. First version that sort of works. Now a TODO list...

Impliment.

Debug Window
Tidy up


Search name/description.
Change container.
Delete container ask what happens to children.
Grid search with photos.
Photo of Home

Import export.
Backups.
Website.

Android version. Maybe javascript to start with.






-->

<head>
  <meta charset="UTF-8">
  <title>Incitio</title>

  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>



  <style>
    .myDiv {
      border: 5px outset red;
      text-align: center;
    }

    body {
      width: 100%;
      margin: 0px;
      padding: 0px;
      margin: 0px;
    }

    img {
      width: 100%;
      /* or any custom size */
      height: 100%;
      object-fit: contain;
    }

    .hasFocus {
      border: 5px outset purple;
      text-align: center;
    }
  </style>
  <script>
    function doSearch() {

      let searchInput = gid("search");


      alert(searchInput.value);
    }

    function getItemObjectById(id) {
      for (i = 0; i < gItemArray.length; i++) {
        //     
        if (gItemArray[i].id == id) {
          return gItemArray[i];
        }

      }
    }


    function getItemObjectIndexById(id) {
      for (i = 0; i < gItemArray.length; i++) {
        //     
        if (gItemArray[i].id == id) {
          return i;
        }

      }
    }


    function buttonSelected(buttonId) {

      let bs = document.getElementsByClassName("hasFocus");

      for (i = 0; i < bs.length; i++) {
        bs[i].classList.remove("hasFocus");
      }

      let thisButton = gid(buttonId);

      thisButton.classList.add("hasFocus");


      let a = buttonId.split("_");
      let itemObject = getItemObjectById(a[1]);

      (gid("inName")).value = itemObject.name;
      (gid("inItemId")).value = itemObject.id;
      (gid("inParentId")).value = itemObject.parentId;
      (gid("inDescription")).value = itemObject.description;
      if (itemObject.image != "?")
        (gid("picture_box")).innerHTML = itemObject.image; else resetPictureBox();

      // Fill list of parents

      let np = gid("newParent");


      let theHTMLL = "";

      for (i = 0; i < gItemArray.length; i++) {
        //     
        if (gItemArray[i].type == "c") {
          theHTML += `<option value="` + gItemArray[i].id + `">` + gItemArray[i].name + `</option>`;



        }
      }


      np.innerHTML = theHTML;
    }



    function getFormValue(id) {
      let r = document.getElementById(id);
      return r.value
    }


    function deleteItem() {

      let idValue = getFormValue('inItemId');

      ar = idValue.split("_");
      id = ar[1];

      thisIndex = getItemObjectIndexById(id);

      gItemArray.splice(thisIndex, 1);

      fromArray();

    }

    function updateItemsFromForm() {

      let nameValue = getFormValue('inName');
      let descriptionValue = getFormValue('inDescription');
      let idValue = getFormValue('inItemId');

      ar = idValue.split("_");

      id = ar[1];

      for (i = 0; i < gItemArray.length; i++) {
        //     
        if (gItemArray[i].id == idValue) {
          gItemArray[i].name = nameValue;
          gItemArray[i].description = descriptionValue;
          gItemArray[i].parentId = getFormValue('newParent');
          break;
        }
      }

      fromArray();

    }

    function resetPictureBox() {
      let x = gid("picture_box");
      x.innerHTML = gPictureBoxInnerHTML;
    }


    function makeNewButton(type) {

      newItemObject = createItem(type);
      if (newItemObject)
        createButton(newItemObject);



    }

    // create a new item from user input
    function createItem(type) {

      newItem = Object.create(gItemArray[0]);

      pName = prompt('Enter item name', 'unNamed');
      if (inName == null) return false;

      let stampx = new Date().getTime();
      let stamp = stampx.toString();

      newItem.id = stamp;
      newItem.type = type;
      newItem.parentId = gCurrentParentId;
      newItem.name = pName;
      newItem.description = pName + " description";
      newItem.image = "?";
      gItemArray.push(newItem);

      return newItem;
    }

    function createButton(itemObject) {
      let newButton = document.createElement('button');
      let elItemsDiv = document.getElementById("divItems");
      elItemsDiv.appendChild(newButton);

      if (itemObject.type == "c") {
        buttonColor = `btn btn-primary`;
      } else {
        buttonColor = `btn btn-success`;
      }

      buttonId = "item_" + itemObject.id;

      theHTML = `<button id="${buttonId}" onClick=buttonSelected("${buttonId}")  ondblclick=setCurrentRoot("${itemObject.id}")  class="${buttonColor}" style="margin:5px">${itemObject.name}</button>`;

      newButton.outerHTML = theHTML;

      //    resetPictureBox();

    }


    function resetChainDiv(rootId) {
      let elChainDiv = gid("divChain");
      elChainDiv.innerHTML = ` <button class="btn btn-primary"  onclick="fromArray()" style="padding:0px;margin:0px ">
                       <h2>Home</h2></button>`;
      return elChainDiv;
    }

    function setCurrentRoot(rootId) {

      doDebug("root is " + rootId);

      let elChainDiv = resetChainDiv();

      function discoverChain(thisId) {

        for (i = 0; i < gItemArray.length; i++) {
          //     alert(gItemArray[i].id);
          if (gItemArray[i].id == thisId) {
            let parentId = gItemArray.parentId;

            if (parentId == 0) {
              return gChainArray;
              break;
            }
            else {
              gChainArray.push(thisId);
              discoverChain(parentId);
            }
          }
        }
      }


      discoverChain(rootId);


      // look at gChainArray!
      //
      //          Never break the chain
      //

      let newButton = document.createElement('button');
      elChainDiv.appendChild(newButton);

      buttonId = "chain_" + rootId;

      for (i = 0; i < gItemArray.length; i++) {

        if (gItemArray[i].id == rootId) {
          theHTML = `<button id="${buttonId}" onClick=buttonSelected("${buttonId}") 
             ondblclick=setCurrentRoot("${rootId}")  class="btn btn-primary"
                    style="margin:5px">${gItemArray[i].name}</button>`;

          newButton.outerHTML = theHTML;
          break;
        }





      }

      gCurrentParentId = rootId;

      //clear divItems
      let el = document.getElementById("divItems");
      el.innerHTML = "";

      // Create buttons in divItems for each child of rootId

      for (i = 0; i < gItemArray.length; i++) {
        if (gItemArray[i].parentId == rootId)
          createButton(gItemArray[i]);
      }

    }

    function fromArray() {
      //     Find all children of Home and make buttons in allButtons
      gid("divItems").innerHTML = "";
      gid("divChain").innerHTML = "";
      for (i = 0; i < gItemArray.length; i++)

        if (gItemArray[i].parentId == "0")
          createButton(gItemArray[i]);

      resetChainDiv(0);
    }

    function doDebug(message) {

      if (message.length == 0) gid("debugWindow").innerHTML = ""; else
        gid("debugWindow").innerHTML = gid("debugWindow").innerHTML + message + "</br>";

    }

    function fromJSON() {
      //   js = '[{\"id\":\"0\",\"type\":\"?\",\"parentId\":\"\",\"name\":\"home\",\"description\":\"the root\",\"image\":\"theImage\"},{\"id\":\"1725214183385\",\"type\":\"i\",\"parentId\":0,\"name\":\"Plate\",\"image\":\"<img src=\\\"data:image/jpeg;base64,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\\\" alt=\\\"PLATE definición y significado | Diccionario Inglés Collins\\\" style=\\\"width: 240px; height: 240px;\\\">\"}]';

      // Retrieve
      let js = localStorage.getItem("jsonString");
      //     js = '[{"id":"0","type":"?","parentId":"?","name":"home","description":"the root","image":"theImage"},{"id":"1725307957660","type":"c","parentId":0,"name":"Small Tool Box","description":"Small Tool Box description","image":"<p><img src=\\"file:///C:/Users/daves/Downloads/Photos-001%20(1)/20240902_140603.jpg\\"></p>"},{"id":"1725307981412","type":"i","parentId":"1725307957660","name":"Magnifying Glass","description":"Magnifying Glass description","image":"?"},{"id":"1725308045531","type":"i","parentId":"1725307957660","name":"Single Hole Punch","description":"Single Hole Punch description","image":"?"},{"id":"1725308123085","type":"i","parentId":"1725307957660","name":"Clamp","description":"Clamp description","image":"?"},{"id":"1725308161629","type":"i","parentId":"1725307957660","name":"Hammer","description":"Hammer description","image":"?"},{"id":"1725308183333","type":"i","parentId":"1725307957660","name":"Clamp","description":"G clamp","image":"?"},{"id":"1725313688194","type":"i","parentId":0,"name":"Hammer","description":"Hammer description","image":"<p><img src=\\"file:///C:/Users/daves/Downloads/Photos-001%20(1)/20240902_141545.jpg\\"></p>"},{"id":"1725313766835","type":"i","parentId":0,"name":"Clamp","description":"Clamp description","image":"<p><img src=\\"file:///C:/Users/daves/Downloads/Photos-001%20(1)/20240902_141504.jpg\\"></p>"},{"id":"1725313857684","type":"i","parentId":0,"name":"One hole punch","description":"One hole punch description","image":"<p><img src=\\"file:///C:/Users/daves/Downloads/20240903_022154.jpg\\"></p>"}]';

      gItemArray = JSON.parse(js);
      fromArray();

      alert("from JSON");
    }

    function toJSON() {
      const myJSON = JSON.stringify(gItemArray);
      // Store
      localStorage.setItem("jsonString", myJSON);

      localStorage.setItem("jsonStringSep4", myJSON);


      Object.keys(localStorage).forEach(function (key) {
        console.log(localStorage.getItem(key));
      });

      alert("to JSON");
    }

  </script>
</head>

<body>

  <div style="display:inline-flex;width:100%">
    <!-- first column -->
    <div class="myDiv" style="width:20%;background-color:pink">

      <p></p>
      <button style="border-style: none;background-color: transparent;">
        <h1> <i class="bi-house" style="font-size: 6rem; color: cornflowerblue;"></i>InCitio</h1>
      </button>

      <div style="margin:auto">
        <button class="btn btn-primary dropdown-toggle " type="button" data-bs-toggle="dropdown" id="dropdownMenuButton"
          style="border-style: none;  margin-top: 20px;border-radius: 16px; ">
          <h1>+New</h1>
        </button>

        <ul class="dropdown-menu">

          <li><a class="dropdown-item" href="#" onClick="makeNewButton('c');">New Container</a>
          </li>
          <li><a class="dropdown-item" href="#" onClick="makeNewButton('i');">New Item</a>
          </li>
        </ul>

      </div>
      <div class="myDiv" style="margin-top:20px">

        <button onclick="toJSON()">To jason</button>
        <button onclick="fromJSON()">From JSON</button>
        <button onclick="fromArray()">From Array</button>
        <button onclick="doDebug(`test`)">Test</button>
        <button onclick="doDebug(``)">Clear</button>
      </div>

      <div class="myDiv" id="debugWindow"
        style="margin-top:20px;width:200px;height:200px;text-align: left; overflow-y:scroll;background-color: aqua blanchedalmond;">



      </div>

    </div>

    <p>
    <p></p>


    <!-- second column -->
    <div class="myDiv" style="width:70%;background-color:white">
      <div class="myDiv" style="background-color:rgb(68, 119, 94);margin:auto">
        <button id="none" class="btn btn-light" style="margin:30px; background-color:blanchedalmond;position: relative;
                width: 60%;height: 15%; border-radius: 16px; box-shadow: 5px 5px 5px gray;">
          <span class="btn-label" onclick="doSearch();"
            style="position:absolute;top:0px; left:10px; margin-bottom: 20px;">
            <i class="bi-search" style="font-size:30px"></i></span>

          <input aria-label="Search inCitio" autocomplete="off" placeholder="Search inCitio" value="" name=""
            type="text" id="search" style="padding: 0px; border:0cap; float:right;
              width: 90%;  background-color: rgb(219, 192, 192);
               z-index: 6; left: 0px;" spellcheck="false" aria-haspopup="true" aria-live="off" aria-owns="gs_sbt50">

        </button>
      </div>

      <!--    Chain   -->
      <div class="myDiv" style="background-color:white;margin:auto">
        <div id="divChain" style="text-align: left;margin-left: 10px;margin-bottom: 10px;" text-align: center;>
          <button class="btn btn-primary" onClick="setCurrentRoot(`0`);" style="padding:0px;margin:0px ">
            <h2>Home</h2>
          </button>
        </div>

        <!--    Items  -->
        <h2 style="text-align: left;margin:10px;">Items</h2>
        <div id="divItems" style="text-align: left;margin-left: 10px;margin-bottom: 10px; ">

        </div>

      </div>


      <div class="myDiv" style="background-color:rgb(92, 68, 119);margin:auto">
        <h2>This is a third div in a center element</h2>
        <p>This is some text in a div element.</p>
      </div>

    </div>

    <!-- third column -->
    <div class="myDiv" style="width:30%;background-color:white">


      <div class="myDiv" id="picture_box"
        style="height:250px;width:250px;margin:auto;margin-top: 20px;margin-bottom: 20px;padding:5px"
        contenteditable="true">
        <!--
        <button id="paste_btn" style="height:auto;padding:20px;" onclick="hid(this);
                 let p = this.parentElement;  
                 p.innerText = 'Now copy an image to the clipboard, THEN right click here to paste it'">
          left click here to start paste
        </button>
     -->
      </div>

      <button onclick="resetPictureBox()">Reset</button>

      <div style="background-color:white;margin:auto; padding:2px; ">
        <div style="text-align:left;background-color: cornsilk;margin-left: 10px;">
          <form>
            <!--    Form   -->
            <div class="form-group">
              <label for="inName">Name:</label>
              <input type="text" class="form-control" id="inName">
              <!--    <label><input type="checkbox"> Remember me</label> -->
            </div>

            <div class="form-group">
              <label for="inDescription">Description</label>
              <textarea class="form-control" id="inDescription" rows="5"></textarea>
            </div>

            <div class="form-group">
              <label for="inItemId">Item Id</label>
              <input type="text" class="form-control" id="inItemId">
            </div>
            <div class="form-group">
              <label for="inParentId">Parent Id</label>
              <input type="text" class="form-control" id="inParentId">
              <p></p>
            </div>

            <div class="form-group">
              <label for="newParent">Change container:</label>
              <select id="newParent" name="newParent">
                <!--
         
                `<option value="1234">Small Toolbox</option>
                <option value="saab">General Tools</option>
                <option value="fiat">Fiat</option>
                <option value="audi">Audi</option>`
       -->


              </select>
            </div>

            <p></p>
            <p></p>

            <div style="background-color: blueviolet;text-align:center">

              <button type="button" class="btn btn-default btn-primary" onclick="updateItemsFromForm();">Update</button>
              <button type="button" class="btn btn-default btn-primary" onclick="deleteItem();">Delete</button>
            </div>

        </div>
      </div>

      <div class="myDiv" id="thirdDiv" style="background-color:rgb(92, 68, 119);margin:auto">
        <h2>This is a third div in a center element</h2>
        <p>This is some text in a div element.</p>
      </div>
    </div>
  </div>



  <script>



    function gid(name) {
      return document.getElementById(name);
    }


    function hid(el) {
      el.display = "none";
    }

    const itemObject = {
      id: "0",
      type: "c",
      parentId: "?",
      name: "home",
      description: "the root",
      image: "theImage"
    };

    let gCurrentParentId = 0;

    let gItemArray = [];

    let gChainArray = [];

    gItemArray.push(itemObject);



    // doDebug("hello");

    function f(el) {
      hid(el);
      let p = el.parentElement;
      p.innerHTML = '<button   style="height:50%;width:50%; padding:20px;margin:auto" >Now copy an image to the clipboard, THEN right click here to paste it</button>';
    }

    let gPictureBoxInnerHTML = `<button id="paste_btn" style="height:90%;width:90%;object-fit:contain;padding:20px;margin:auto" 
    onclick="f(this);"  >left click here to start paste</button>`;




    function doBefore() {
      let p = document.getElementById("picture_box");

      p.style.padding = "0px";
      p.innerHTML = "";
    }

    function doAfter() {
      try {
        let p = document.getElementById("picture_box");
        let pictureBox = p.firstElementChild;


        thisId = (gid("inItemId")).value;



        thisIndex = getItemObjectIndexById(thisId);
        gItemArray[thisIndex].image = pictureBox.outerHTML; // save the outerHTML


        document.activeElement.blur();
      }
      catch {

        doDebug("must be some mistake");

      }



    }


    gid("picture_box").addEventListener('paste',
      (ev) => {
        doBefore();
      }, true);

    gid("picture_box").addEventListener('paste',
      (ev) => {
        setTimeout(doAfter, 1000);

      }, false);


    let x = localStorage.getItem("jsonStringSep4");



  </script>
  <!--

 jason =   '[{"id":"0","type":"c","parentId":"","name":"home","description":"the root"},{"id":"1724876619107","type":"c","parentId":"0","name":"Kitchen","description":""},{"id":"1724876628283","type":"c","parentId":"0","name":"Study","description":""},{"id":"1724876635379","type":"c","parentId":"0","name":"Shed","description":""},{"id":"1724876671440","type":"i","parentId":"1724876619107","name":"Knife","description":""},{"id":"1724876680143","type":"i","parentId":"1724876619107","name":"Fork","description":""},{"id":"1724876697405","type":"i","parentId":"1724876635379","name":"Spanner","description":""}]'


json ='[{"id":"0","type":"c","parentId":"","name":"home","description":"the root"},{"id":"1724876619107","type":"c","parentId":"0","name":"Kitchen","description":""},{"id":"1724876628283","type":"c","parentId":"0","name":"Study","description":""},{"id":"1724876635379","type":"c","parentId":"0","name":"Shed","description":""},{"id":"1724876671440","type":"i","parentId":"1724876619107","name":"Knife","description":""},{"id":"1724876680143","type":"i","parentId":"1724876619107","name":"Fork","description":""},{"id":"1724876697405","type":"i","parentId":"1724876635379","name":"Spanner","description":""},{"id":"1725155019094","type":"i","parentId":"1724876619107","name":"Spoon"},{"id":"1725155029207","type":"i","parentId":"1724876619107","name":"Fridge"},{"id":"1725155040300","type":"i","parentId":"1724876619107","name":"Cupboard"},{"id":"1725155069892","type":"c","parentId":"1724876619107","name":"Drawer"},{"id":"1725155102196","type":"i","parentId":"1725155069892","name":"Chopper"},{"id":"1725155118228","type":"i","parentId":"1725155069892","name":"Mixer"}]'

json = '[{"id":"0","type":"?","parentId":"?","name":"home","description":"the root","image":"theImage"},{"id":"1725307957660","type":"c","parentId":0,"name":"Small Tool Box","description":"Small Tool Box description","image":"?"},{"id":"1725307981412","type":"i","parentId":"1725307957660","name":"Magnifying Glass","description":"Magnifying Glass description","image":"?"},{"id":"1725308045531","type":"i","parentId":"1725307957660","name":"Single Hole Punch","description":"Single Hole Punch description","image":"?"},{"id":"1725308123085","type":"i","parentId":"1725307957660","name":"Clamp","description":"Clamp description","image":"?"},{"id":"1725308161629","type":"i","parentId":"1725307957660","name":"Hammer","description":"Hammer description","image":"?"},{"id":"1725308183333","type":"i","parentId":"1725307957660","name":"Clamp","description":"G clamp","image":"?"}]'
-->

</body>




</html>